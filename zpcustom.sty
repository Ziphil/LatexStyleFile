% ＊ オプションの用意
\newif\ifzpenglish
\zpenglishfalse
\DeclareOption{english}{\zpenglishtrue}
\ProcessOptions*

% ＊ パッケージの読み込み
% newtxmath パッケージが読み込まれていない場合に限り、記号を追加するため amssymb パッケージなどを読み込みます。
% それ以外の読み込まれるパッケージは以下の通りです。
% ・ amsthm ･･･ 定理環境
% ・ graphicx ･･･ グラフィックの描画
% ・ color ･･･ 色付き文字の描画
% ・ relsize ･･･ 相対フォントサイズ指定するコマンド (\smaller, \larger)
% ・ delarray ･･･ 繁分数の括弧
% ・ tikz-cd ･･･ 可換図式
% ・ BOONDOX-cal ･･･ カリグラフィーフォントの変更
% ・ bm ･･･ \bm コマンド
% ・ cleveref ･･･ 名称付きの参照
\@ifpackageloaded{newtxmath}{}{
  \usepackage{amssymb}
  \usepackage{amsmath}
}
\usepackage{amsthm}
\usepackage[dvipdfmx]{graphicx}
\usepackage[dvipdfmx]{color}
\usepackage{relsize}
\usepackage{delarray}
\usepackage{tikz-cd}
\usepackage{BOONDOX-cal}
\usepackage{bm}
\usepackage{cleveref}

% ＊ 不足記号の追加
% amssymb パッケージが提供しない記号を定義します。
\providecommand{\coloneqq}{\mathrel{:=}}
\providecommand{\eqqcolon}{\mathrel{=:}}

% ＊ 数式用括弧
% 上下の高さに合わせた括弧を表示させられるようにします。
% 集合の内包表記のような 3 つから成る括弧は「\la \llm x \rlm y \ra」のようにしてください。
\newcommand{\lp}{\begin{array}[t]({@{}c@{}})\displaystyle}
\newcommand{\rp}{\end{array}}
\newcommand{\lB}{\begin{array}[t]\{{@{}c@{}}\}\displaystyle}
\newcommand{\rB}{\end{array}}
\newcommand{\lb}{\begin{array}[t][{@{}c@{}}]\displaystyle}
\newcommand{\rb}{\end{array}}
\newcommand{\lv}{\begin{array}[t]\lvert{@{}c@{}}\rvert\displaystyle}
\newcommand{\rv}{\end{array}}
\newcommand{\lV}{\begin{array}[t]\lVert{@{}c@{}}\rVert\displaystyle}
\newcommand{\rV}{\end{array}}
\newcommand{\lf}{\begin{array}[t]\lfloor{@{}c@{}}\rfloor\displaystyle}
\newcommand{\rf}{\end{array}}
\newcommand{\lc}{\begin{array}[t]\lceil{@{}c@{}}\rceil\displaystyle}
\newcommand{\rc}{\end{array}}
\newcommand{\la}{\begin{array}[t]\langle{@{}c@{}}\rangle\displaystyle}
\newcommand{\ra}{\end{array}}
\newcommand{\lpb}{\begin{array}[t]({@{}c@{}}]\displaystyle}
\newcommand{\rpb}{\end{array}}
\newcommand{\lbp}{\begin{array}[t][{@{}c@{}})\displaystyle}
\newcommand{\rbp}{\end{array}}
\newcommand{\llm}{\!\begin{array}[t].{@{}c@{\:}}\rvert\displaystyle}
\newcommand{\rlm}{\end{array}\:}
\newcommand{\lrm}{\:\begin{array}[t]\lvert{@{\:}c@{}}.\displaystyle}
\newcommand{\rrm}{\end{array}\!}
\newcommand{\lpn}{\begin{array}[t]({@{}c@{}}.\displaystyle}
\newcommand{\rpn}{\end{array}}
\newcommand{\lnp}{\begin{array}[t].{@{}c@{}})\displaystyle}
\newcommand{\rnp}{\end{array}}

% ＊ 前後のスペースが多めの論理記号
\newcommand{\fland}{\,\land\,}
\newcommand{\flor}{\,\lor\,}
\newcommand{\wland}{\mathbin{\text{\textsc{and}}}}
\newcommand{\wlor}{\mathbin{\text{\textsc{or}}}}
\newcommand{\fwland}{\,\mathbin{\text{\textsc{and}}}\,}
\newcommand{\fwlor}{\,\mathbin{\text{\textsc{or}}}\,}
\newcommand{\ffwland}{\:\,\mathbin{\text{\textsc{and}}}\:\,}
\newcommand{\ffwlor}{\:\,\mathbin{\text{\textsc{or}}}\:\,}
\newcommand{\fto}{\,\to\,}
\newcommand{\frightarrow}{\,\rightarrow\,}
\newcommand{\fleftarrow}{\,\leftarrow\,}
\newcommand{\fleftrightarrow}{\,\leftrightarrow\,}
\newcommand{\fRightarrow}{\,\Rightarrow\,}
\newcommand{\fLeftarrow}{\,\Leftarrow\,}
\newcommand{\fLeftrightarrow}{\,\Leftrightarrow\,}
\newcommand{\fLongrightarrow}{\,\Longrightarrow\,}
\newcommand{\fLongleftarrow}{\,\Longleftarrow\,}
\newcommand{\fLongleftrightarrow}{\,\Longleftrightarrow\,}
\newcommand{\fiff}{\,\Longleftrightarrow\,}
\newcommand{\fcoloniff}{\,\mathrel{:\Longleftrightarrow}\,}

% ＊ カリグラフィー体
\newcommand{\mathscr}[1]{\mathcal{#1}}

% ＊ 関数名
\newcommand{\op}[1]{\operatorname{#1}}

% ＊ 著者名欄の学籍番号
\newcommand{\stnumber}[1]{{\smaller[1]#1}}

% ＊ 強調した文字
\newcommand{\textem}[1]{\textsf{\textgt{#1}}}

% ＊ 外国語表記
\newcommand{\fl}[1]{{\smaller[1](#1)}}

% ＊ 段落名
\newcommand{\pname}[1]{\noindent\textsf{\textgt{#1}}\hspace{1zw}}

% ＊ 定理環境
\ifzpenglish
  \newtheorem{definition}{Definition}[section]
  \newtheorem{theorem}[definition]{Theorem}
  \newtheorem{proposition}[definition]{Proposition}
  \newtheorem{lemma}[definition]{Lemma}
  \newtheorem{corollary}[definition]{Corollary}
  \crefname{definition}{Definition}{Definitions}
  \crefname{theorem}{Theorem}{Theorems}
  \crefname{proposition}{Proposition}{Propositions}
  \crefname{lemma}{Lemma}{Lemmata}
  \crefname{corollary}{Corollary}{Corollaries}
  \renewcommand{\proofname}{Proof}
\else
  \newtheorem{definition}{定義}[section]
  \newtheorem{theorem}[definition]{定理}
  \newtheorem{proposition}[definition]{命題}
  \newtheorem{lemma}[definition]{補題}
  \newtheorem{corollary}[definition]{系}
  \crefname{definition}{定義}{定義}
  \crefname{theorem}{定理}{定理}
  \crefname{proposition}{命題}{命題}
  \crefname{lemma}{補題}{補題}
  \crefname{corollary}{系}{系}
  \renewcommand{\proofname}{証明}
\fi

% ＊ TikZ-cd 用環境
\newenvironment{cd}[1]{\begin{tikzcd}[ampersand replacement=\&, #1]}{\end{tikzcd}}
\tikzset{commutative diagrams/arrow style=math font}

% ＊ スペース関連
% ・ \ssp ･･･ 付加条件の括弧の前のスペース (5/18 em)
% ・ \qsp ･･･ 量化子の直後のスペース (8/18 em)
\newcommand{\ssp}{\;}
\newcommand{\qsp}{\:\;} 

% ＊ 参考文献用
\newcommand{\atit}[1]{\textsl{#1}}
\newcommand{\jtit}[1]{#1}

% ＊ ?
% \arraystretch の値をもともとの行間に戻します。
\newcommand{\defaultas}{\renewcommand{\arraystretch}{1}}

% ＊ ToDo
\definecolor{todo}{rgb}{1,0,0}
\newcommand{\todo}[1]{\textcolor{todo}{#1}}

% ＊ その他記号
\newcommand{\cl}{\colon}
\newcommand{\scl}{\semicolon}
\newcommand{\ocdots}{\mathord{\cdots}}